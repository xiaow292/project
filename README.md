## 达梦安装

### window安装

#### 安装准备

* 在安装 DM 数据库前，需要检查当前操作系统的相关信息，确认 DM 数据库安装程序与当前操作系统匹配，以保证 DM 数据库能够正确安装和运行。
* 要尽量保证操作系统至少 1 GB 以上的可用内存 (RAM)。如果可用内存过少，可能导致 DM 数据库安装或启动失败。
* DM 完全安装需要至少 1 GB 以上的存储空间，用户需要提前规划好安装目录，预留足够的存储空间。

#### 数据库安装

1、解压安装包后，双击运行【setup.exe】安装程序，请根据系统配置选择相应语言与时区，点击【确定】按钮继续安装；<br>
2、安装向导中点击【下一步】按钮继续安装，用户需阅读并接受许可证协议才能进入【下一步】；<br>
3、选取对应版本的 Key 文件，安装程序将自动验证 Key 文件合法性，点击【下一步】继续安装，如果没有key文件则直接进行【下一步】；<br>
4、选择安装组件：DM 安装程序提供四种安装方式：“典型安装”、“服务器安装”、“客户端安装”和“自定义安装”，此处建议选择【典型安装】；<br>
5、选择安装目录：DM 默认安装在 C:\dmdbms 目录下，可改为其他任意盘符，如D:dmdbms<br>
6、安装小结：显示用户即将进行的数据库安装信息，例如产品名称、版本信息、安装类型、安装目录、可用空间、可用内存等信息，用户检查无误后点击【安装】按钮进行 DM 数据库的安装。<br>

#### 实例配置

1、数据库安装后会弹出达梦数据库配置助手，选择【创建数据库实例】，点击【开始】进入下一步骤;<br>
2、创建数据库模板：有【一般用途】、【联机分析处理】、和【联机事务处理】三种模板供选择；<br>
3、选择数据库目录：如 D:\dmdbs\data<br>
4、输入数据库标识：输入数据库名称、实例名、端口号等参数；<br>
5、数据库文件所在位置：可通过选择或输入确定数据库控制、数据库日志等文件的所在位置；<br>
6、数据库初始化参数：可以配置数据库的初始化参数；<br>
7、口令管理：可设置登陆口令，默认口令与登录名一致；<br>
8、选择创建示例库：可以选择是否勾选创建示例库 BOOKSHOP 或 DMHR；<br>
9、创建数据库摘要：在安装数据库之前，将显示用户通过数据库配置工具设置的相关参数。点击【完成】进行数据库实例的初始化工作。<br>

#### 数据库启动和停止

* 数据库可以通过DM服务查看器进行启动和停止。在开始菜单中的【达梦数据库】是快捷方式，打开目录下的DM服务查看器，可以看到已创建的实例服务。选择对应的服务，右键可选择【启动】或【停止】服务。<br>
* 以命令行的方式启停服务。启动数据库服务后，敲入exit停止数据库服务。
```shell
cd D:\dmdbms\bin
dmserver.exe D:\dmdbms\data\DAMENG\dm.ini
```

### Linux安装

#### 安装准备

##### 新建 dmdba 用户
创建用户所在的组，命令如下：
```shell
groupadd dinstall
```
创建用户，命令如下：
```shell
useradd -g dinstall -m -d /home/dmdba -s /bin/bash dmdba
```
修改用户密码，命令如下：
```shell
passwd dmdba
```

##### 修改文件打开最大数
可使用 dmdba 用户执行如下命令，使设置临时生效：
```shell
ulimit -n 65536
```

##### 挂载镜像
切换到 root 用户，将 DM 数据库的 iso 安装包保存在任意位置，例如 /opt 目录下，执行如下命令挂载镜像：
```shell
mount -o loop /opt/dm8_setup_rh7_64_ent_8.1.1.45_20191121.iso /mnt
```

#### 数据库安装

切换至 dmdba 用户下，在 /mnt 目录下使用命令行安装数据库程序，依次执行以下命令安装 DM 数据库。
```shell
su - dmdba
cd /mnt/
./DMInstall.bin
```
若出现：初始化图形界面失败，如果当前监视器窗口不支持图形界面，请进入安装文件所在文件夹并使用"./DMInstall.bin -i"进行命令行安装。错误提示，可按以下两种方式操作解决：
方法一：注销当前用户，登陆 dmdba 用户，执行 ./DMInstall.bin 命令。
方法二：用当前用户执行 xhost +，切换到 dmdba 用户，执行 export DISPLAY=:0，再执行 xhost +命令。

1、弹出图形化安装界面后，请根据系统配置选择相应语言与时区，点击【确定】按钮继续安装；<br>
<img width="374" alt="image" src="https://user-images.githubusercontent.com/73985884/217770636-64b5d452-643a-41a4-9188-71a0c00a8ad0.png"> <br>
2、安装向导中点击【下一步】按钮继续安装，用户需阅读并接受许可证协议才能进入【下一步】；<br>
<img width="526" alt="image" src="https://user-images.githubusercontent.com/73985884/217770749-1a668e85-cd69-449b-99d6-d8fefb8c94cf.png"> <br>
3、选取对应版本的 Key 文件，安装程序将自动验证 Key 文件合法性，点击【下一步】继续安装，如果没有key文件则直接进行【下一步】；<br>
<img width="523" alt="image" src="https://user-images.githubusercontent.com/73985884/217978881-adf15d51-3703-4d29-b324-8e0d18ff8381.png"> <br>
4、选择安装组件，选择【典型安装】默认组件全选；<br>
<img width="526" alt="image" src="https://user-images.githubusercontent.com/73985884/217979073-4d68b6bf-7569-4f2a-929b-0f36ffa20fe8.png"> <br>
5、选择安装目录：DM 默认安装在 /home/dmdba/dmdbms 目录下。<br>
<img width="450" alt="image" src="https://user-images.githubusercontent.com/73985884/217979212-45f0d69b-bade-4427-aecd-9579fe9d3718.png"> <br>
6、点击【下一步】后，弹出确认安装信息页面，检查安装信息是否准确，确认无误后点击【安装】。<br>
<img width="523" alt="image" src="https://user-images.githubusercontent.com/73985884/217979326-d6fabd18-59d7-42e0-b505-17ff6ce5843d.png"> <br>
7、点击【安装】后，等待 1~2 分钟即可安装完成，安装完成后弹出执行配置脚本页面，需要按照页面要求，重新打开一个终端，切换到 root 用户执行该脚本。 <br>
<img width="380" alt="image" src="https://user-images.githubusercontent.com/73985884/217979390-ee65e789-f363-4aaf-8a73-0c5b9d3dd4f6.png">
脚本执行完成后，点击执行配置脚本页面中的【完成】，弹出提示框，提示是否关闭窗口，选择是，提示数据库安装完成，再点击【完成】按钮，完成数据库安装。

#### 实例配置


#### 注册服务


#### 启停数据库




## 使用
